-# Copyright 2012 Twitter, Inc. and others.
-#
-# Licensed under the Apache License, Version 2.0 (the "License");
-# you may not use this file except in compliance with the License.
-# You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.

%h1= @m_turk_user.friendly_name

-if @m_turk_user.errors.any?
  #error_explanation.alert.alert-error
    %a.close{'data-dismiss' => 'alert', 'href' => '#'} Ã—
    %h4.alert-heading= "#{pluralize(@m_turk_user.errors.count, "error")} prohibited this worker from being saved:"
    %ul
      - @m_turk_user.errors.full_messages.each do |msg|
        %li= msg

= form_for @m_turk_user, :html => {:class => 'form-horizontal'} do |f|
  .control-group
    .control-label
      ID
    .controls
      = @m_turk_user.id
  .control-group
    = f.label :name, :class => 'control-label'
    .controls
      = f.text_field :name, :class => 'text_field'
  .control-group
    .control-label
      \# of Evalutions Worked On
    .controls
      = @m_turk_user.evaluation_count
  .control-group
    .control-label
      \# of Responses
    .controls
      = @m_turk_user.task_responses.count
  .control-group
    .control-label
      Average Responses per Evaluation
    .controls
      = @m_turk_user.task_responses.count.to_f / @m_turk_user.evaluation_count
  .control-group
    .control-label
      Mean Time (s)
    .controls
      = @m_turk_user.stats.mean_time
  .control-group
    .control-label
      Median Time (s)
    .controls
      = @m_turk_user.stats.median_time
  .control-group
    .control-label
      Mean Pay Rate ($/hr)
    .controls
      = format_cents(@m_turk_user.stats.mean_pay_rate)
  .control-group
    .control-label
      Median Pay Rate ($/hr)
    .controls
      = format_cents(@m_turk_user.stats.median_pay_rate)
  .control-group
    = f.label :notes, :class => 'control-label'
    .controls
      = f.text_area :notes

  .form-actions
    = f.submit 'Save', :class => 'btn btn-primary'

= link_to "&laquo; Workers List".html_safe, m_turk_users_path

